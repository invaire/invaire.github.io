<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö—Ä–æ—Å—Å–≤–æ—Ä–¥ ¬´–í–æ–ª—à–µ–±—Å—Ç–≤–æ –≤ —Å–µ—Ä–¥—Ü–µ¬ª</title>
  <style>
    
    /*–æ–¥–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ‚Äî –æ–¥–∏–Ω —Ä–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏ */
    :root{
      --cell: clamp(22px, calc((100vw - 40px) / 11), 40px);         
      --grid-line: 1px;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
      margin: 0;
      background-image: url('img/FON.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

        /* –Ω–∞–∑–≤–∞–Ω–∏–µ */
    h1 {
      color: #f8d14b;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.5);
    } 
    
    /* –°—Ç–∞—Ä—Ç–æ–≤–æ–µ –æ–∫–Ω–æ */
    #startOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      transition: opacity 0.6s ease;
    }
    /* –õ—ë–≥–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É */
    #startOverlay .start-content { 
      position: relative; 
      overflow: visible; 
      transition: transform 0.6s ease, opacity 0.6s ease;
    }
    #startOverlay.hidden {
      opacity: 0;
      pointer-events: none;
    }
    #startOverlay.hidden .start-content {
      opacity: 0;
      transform: scale(0.9); /* —Å–ª–µ–≥–∫–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –ø—Ä–∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–∏ */
    }

    /* –†–∞–¥—É–∂–Ω–∞—è –≤—Å–ø—ã—à–∫–∞ –∏–∑ —Ç–æ—á–∫–∏ –∫–ª–∏–∫–∞ */
    #startOverlay .start-content.flash::after{
      content: "";
      position: absolute;
      inset: -2px;
      border-radius: 16px;
      background: radial-gradient(
        circle at var(--x) var(--y),
        rgba(255,255,255,.95) 0%,
        rgba(255,255,255,.4) 35%,
        rgba(255,255,255,0) 65%
      );
      animation: flash-out .6s ease-out forwards;
      pointer-events: none;
    }
    @keyframes flash-out{
      from { opacity: .9; }
      to   { opacity: 0; }
    }

    /* –ò—Å–∫—Ä—ã */
    .spark{
      position: absolute;
      left: 0; top: 0;
      width: 12px; height: 12px;   /* –†–∞–∑–º–µ—Ä –∏—Å–∫—Ä */
      border-radius: 50%;
      background: hsl(var(--h) 90% 60%);
      box-shadow: 0 0 8px hsl(var(--h) 90% 60%);
      transform: translate(-50%, -50%);
      opacity: 0;
      pointer-events: none;
      animation: spark-fly var(--dur, 1.2s) ease-out forwards;  /* —Å–∫–æ—Ä–æ—Å—Ç—å –∏—Å—á–µ–∑–∞–Ω–∏—è */
    }
    @keyframes spark-fly{
      0%   { opacity: 1; transform: translate(calc(-50% + 0px),   calc(-50% + 0px))   scale(1); }
      100% { opacity: 0; transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(.2); }
    }

    /* –£–≤–∞–∂–µ–Ω–∏–µ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
    @media (prefers-reduced-motion: reduce){
      .spark { animation: none; opacity: 0; }
      #startOverlay .start-content.flash::after { animation: none; opacity: 0; }
    }

    .start-content {
      background: white;
      padding: 20px 30px;
      border-radius: 12px;
      text-align: center;
      max-width: 500px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .start-content h2 {
      margin-bottom: 10px;
    }

    .start-content p {
      margin-bottom: 15px;
    }

    .start-content button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #f8d14b;
      cursor: pointer;
    } 
    /* —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª –≤ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º –æ–∫–Ω–µ */
    .rules {
      list-style: none;       /* —É–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–æ—á–∫–∏ */
      padding: 0;
      margin: 15px 0;
      text-align: left;
    }

    .rules li {
      margin-bottom: 10px;
      padding-left: 0;     /* —É–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–π –æ—Ç—Å—Ç—É–ø */
      display: flex;       /* —Å–Ω–µ–∂–∏–Ω–∫–∞ + —Ç–µ–∫—Å—Ç –≤ –æ–¥–Ω—É –ª–∏–Ω–∏—é */
      align-items: center; /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ —Ü–µ–Ω—Ç—Ä—É */
      font-size: 16px;
      line-height: 1.5;
    }

    .rules li::before {
      content: "‚ùÑÔ∏è";
      margin-right: 8px;   /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–Ω–µ–∂–∏–Ω–∫–æ–π –∏ —Ç–µ–∫—Å—Ç–æ–º */
      font-size: 18px;     /* –º–æ–∂–Ω–æ –ø–æ–¥–æ–≥–Ω–∞—Ç—å —Ä–∞–∑–º–µ—Ä */
    }
       /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫—Ä–æ—Å—Å–≤–æ—Ä–¥–∞ */
    .crossword{
      display: grid;
      grid-template-columns: repeat(11, var(--cell));
      grid-template-rows:    repeat(19, var(--cell));
      gap: 0;
      padding: 12px;
      margin: 0 auto;
      background-color: rgba(255,255,255,.6);
      backdrop-filter: blur(5px);
      border-radius: 10px;
      box-sizing: border-box;       /* –≤–∞–∂–Ω–æ */
      max-width: 100vw;             /* —á—Ç–æ–±—ã –Ω–µ –≤—ã–ª–µ–∑–∞–ª–æ –∑–∞ —ç–∫—Ä–∞–Ω */
      width: calc(var(--cell) * 11 + 24px);    /* 24px = –ø–∞–¥–¥–∏–Ω–≥ 12px —Å–ª–µ–≤–∞ + 12px —Å–ø—Ä–∞–≤–∞ */
      box-shadow: 0 10px 30px rgba(0,0,0,.18), 0 2px 8px rgba(0,0,0,.12);       /* –º—è–≥–∫–∞—è —Ç–µ–Ω—å —É –±–ª–æ–∫–∞ –∫—Ä–æ—Å—Å–≤–æ—Ä–¥–∞ */
    }

    /* –±–∞–∑–æ–≤–∞—è –∫–ª–µ—Ç–∫–∞ */
    .cell{
      box-sizing: border-box;        /* —Ä–∞–º–∫–∞ –≤—Ö–æ–¥–∏—Ç –≤ —Ä–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏ */
      width:  var(--cell);
      height: var(--cell);
      background: rgba(255,255,255,.9);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: calc(var(--cell) * .44);  /* –º–∞—Å—à—Ç–∞–± —Ü–∏—Ñ—Ä/–±—É–∫–≤ */
      font-weight: bold;
      position: relative;
      border: 1px solid transparent;  /* –≥—Ä–∞–Ω–∏—Ü—É –ø—Ä—è—á–µ–º‚Ä¶ */
      transition: background-color .15s ease, box-shadow .15s ease, transform .05s ease;  /* –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ */
      border-radius: 6px;
      background-clip: padding-box;         /* —á—Ç–æ–±—ã —Ñ–æ–Ω –Ω–µ –∑–∞–ª–µ–∑–∞–ª –ø–æ–¥ ¬´–ª–∏–Ω–∏—é¬ª */
      box-shadow: inset 0 0 0 1px #333;     /* ‚Ä¶–∞ –ª–∏–Ω–∏—é —Ä–∏—Å—É–µ–º –∏–Ω—Å–µ—Ç-—Ç–µ–Ω—å—é */
    }
    /* –ø—É—Å—Ç–∞—è (—Å–∫—Ä—ã—Ç–∞—è) –∫–ª–µ—Ç–∫–∞ ‚Äî —Ç–∞ –∂–µ –≥–µ–æ–º–µ—Ç—Ä–∏—è, –Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è */
    .cell.blank{
      background: transparent;
      box-shadow: inset 0 0 1px transparent; /* —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–∏–Ω–∏–∏ */
      border: 1px solid transparent;        /* –∏ –≤–Ω–µ—à–Ω–µ–π —Ç–æ–∂–µ */
    }

    /* –ª—ë–≥–∫–∏–π ¬´–∫–ª–∏–∫¬ª –ø—É—Å—Ç—å –æ—Å—Ç–∞–µ—Ç—Å—è –∫–∞–∫ –±—ã–ª */
    .cell:not(.blank):active{
      transform: translateY(1px);
    }
    /* –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–µ-–ø—É—Å—Ç—ã—Ö –∫–ª–µ—Ç–æ–∫ */
    .cell:not(.blank):hover{
      background-color: rgba(255,255,255,.96);
    /* –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ç–æ–Ω–∫–∞—è –ª–∏–Ω–∏—è + –±–µ–ª–æ–µ –º—è–≥–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ + –ª—ë–≥–∫–∏–π –≥–æ–ª—É–±–æ–π –æ—Ä–µ–æ–ª */
      box-shadow: 
        inset 0 0 0 1px #333,
        0 0 10px 1px rgba(255,255,255,.85),
        0 0 16px 5px rgba(120,180,255,.35);
      z-index: 2;   /* —á—Ç–æ–±—ã –æ—Ä–µ–æ–ª –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∏ —Å–æ—Å–µ–¥–Ω–∏–µ –∫–ª–µ—Ç–∫–∏ */
    }

    /* —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ */
    .cell.start{
      background: #cce5ff;
      cursor: pointer;
    }
    .cell.start:hover {
    background: #cce5ff !important;
    }
    .cell.filled {
      color: #333;
    }
    @media (max-width: 480px){
      h1{ font-size: 1.8rem; }
      .crossword{ padding: 8px; }
    }
    
    /* –º–∞–ª–µ–Ω—å–∫–∏–µ –Ω–æ–º–µ—Ä–∞ ‚Äî –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –≤—ã—Å–æ—Ç—É –∫–ª–µ—Ç–∫–∏ */
    .number{
      position: absolute;
      top: 2px;
      left: 3px;
      font-size: 0.65rem;
      line-height: 1;
      pointer-events: none;
    }

    /* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–¥–∞–ª–∫–∏ */
    #modal {
      display:none;
      opacity: 0;                    /*–ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π*/
      transition: opacity .2s ease;  /*–ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π*/
      position:fixed;
      inset:0;                   /* top:0; right:0; bottom:0; left:0 */
      z-index:999;
      background:rgba(0,0,0,.55);
      justify-content:center;
      align-items:center;
      padding:clamp(8px,4vw,24px); /* –æ—Ç—Å—Ç—É–ø—ã –æ—Ç –∫—Ä–∞—ë–≤ —ç–∫—Ä–∞–Ω–∞ */
      box-sizing:border-box;
    }
    
    /* –°–ê–ú–û –û–ö–ù–û ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞/–≤—ã—Å–æ—Ç–∞ */
    .modal-content{
      position:relative;
      background:#fff;
      border-radius:12px;
      text-align:center;
      padding:16px;
      width:min(92vw, 520px);       /* –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö 400px */
      max-height:min(86vh, 720px);  /* —á—Ç–æ–±—ã –ø–æ–º–µ—â–∞–ª–æ—Å—å –ø–æ –≤—ã—Å–æ—Ç–µ */
      overflow:auto;                /* –ø—Ä–æ–∫—Ä—É—Ç–∫–∞, –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–Ω–æ–≥–æ */
      box-shadow:0 0 20px rgba(0,0,0,.3);
    }
    /* –∫–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ */
    #modal.show{                 /* –∫–ª–∞—Å—Å –±—É–¥–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –∏–∑ JS */
      opacity: 1;
    }  
    /* —Å–∞–º–∞ ¬´–∫–∞—Ä—Ç–æ—á–∫–∞¬ª */
    #modal .modal-content{
      transform: translateY(10px);
      opacity: 0;
      transition: transform .25s ease, opacity .25s ease;
    }
    #modal.show .modal-content{
      transform: translateY(0);
      opacity: 1;
    }
    
    /* –∫–∞—Ä—Ç–∏–Ω–∫–∞ –≤–Ω—É—Ç—Ä–∏ ‚Äî –≤–ø–∏—Å—ã–≤–∞–µ–º—Å—è –≤ –æ–∫–Ω–æ */
    .modal-content img{
      width:100%;
      height:auto;
      max-height:48vh;             /* —á—Ç–æ–±—ã –ø–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –ø–æ–º–µ—â–∞–ª–æ—Å—å –ø–æ–ª–µ –∏ –∫–Ω–æ–ø–∫–∞ */
      object-fit:contain;
      display:block;
      border-radius:8px;
      margin:0 auto 12px;
    }

    .close {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 24px;
      cursor: pointer;
    }
    /* –ø–æ–ª–µ –≤–≤–æ–¥–∞ ‚Äî –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É –∏ –±–µ–∑ zoom –Ω–∞ iOS */
    #user-answer{
      width:100%;
      box-sizing:border-box;
      font-size:16px;              /* 16px —É–±–∏—Ä–∞–µ—Ç –∞–≤—Ç–æ-–∑—É–º –≤ iOS */
    }
    /* –∫—Ä–µ—Å—Ç–∏–∫ —á—É—Ç—å –±–ª–∏–∂–µ –∫ –∫—Ä–∞—é –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    .close{ top:8px; right:10px; }

    /* –Ω–∞ —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö –∫–Ω–æ–ø–∫—É —Å–¥–µ–ª–∞—Ç—å —à–∏—Ä–æ–∫–æ–π */
    @media (max-width:480px){
      #submit-answer{ width:100%; padding:12px; }
    }

    /* –±–ª–æ–∫–∏—Ä—É–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Ñ–æ–Ω–∞, –∫–æ–≥–¥–∞ –º–æ–¥–∞–ª–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞ */
    body.modal-open{ overflow:hidden; }
    #submit-answer {
      margin-top: 10px;
      padding: 8px 16px;
    }
  </style>
</head>
<body>
  <!-- –°—Ç–∞—Ä—Ç–æ–≤–æ–µ –æ–∫–Ω–æ -->
  <div id="startOverlay" role="dialog" aria-modal="true">
    <div class="start-content">
    <h2>üéÑ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
    <p>–†–∞–∑–≥–∞–¥–∞–π—Ç–µ –∫—Ä–æ—Å—Å–≤–æ—Ä–¥ –∏ —É–∑–Ω–∞–π—Ç–µ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—É—é —Ñ—Ä–∞–∑—É!</p>
    <ul class="rules">
      <li>–ö–ª–∏–∫–∞–π—Ç–µ –ø–æ –Ω–æ–º–µ—Ä—É —Å–ª–æ–≤–∞, —á—Ç–æ–±—ã –≤–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç.</li>
      <li>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è.</li>
      <li>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –∫–ª–µ—Ç–∫–∏, —á—Ç–æ–±—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É.</li>
    </ul>
    <button id="startBtn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    </div>
  </div>

  <h1>–í–æ–ª—à–µ–±—Å—Ç–≤–æ –≤ —Å–µ—Ä–¥—Ü–µ</h1>
  <div class="crossword" id="crossword"></div>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
  const startBtn = document.querySelector('.start-content button');

  startBtn.addEventListener('click', () => {
    const wrap = document.querySelector('#startOverlay .start-content');
    const btnRect  = startBtn.getBoundingClientRect();
    const wrapRect = wrap.getBoundingClientRect();

    // —Ü–µ–Ω—Ç—Ä –∫–Ω–æ–ø–∫–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    const cx = btnRect.left + btnRect.width  / 2 - wrapRect.left;
    const cy = btnRect.top  + btnRect.height / 2 - wrapRect.top;

    // 1) –≤—Å–ø—ã—à–∫–∞
    wrap.style.setProperty('--x', cx + 'px');
    wrap.style.setProperty('--y', cy + 'px');
    wrap.classList.add('flash');

    // 2) –∏—Å–∫—Ä—ã
    const hues  = [0, 45, 200, 120, 300]; // –∫—Ä–∞—Å–Ω—ã–π, –∂—ë–ª—Ç—ã–π, –∑–µ–ª—ë–Ω—ã–π, —Å–∏–Ω–∏–π, —Ä–æ–∑–æ–≤—ã–π
    const count = 40;  // —Ä–∞–∑–º–µ—Ä —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∞, –º–Ω–æ–≥–æ –∏—Å–∫—Ä
    for (let i = 0; i < count; i++) {
      const s = document.createElement('span');
      s.className = 'spark';
      s.style.left = cx + 'px';
      s.style.top  = cy + 'px';

      // —É–≥–æ–ª + —Å–∫–æ—Ä–æ—Å—Ç—å
      const angle = (Math.PI * 2) * (i / count);
      
      // üéá —Å–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏—Å–∫—Ä—ã (–æ—Ç 6px –¥–æ 16px)
      const size = 4 + Math.random() * 20;
      s.style.width = size + 'px';
      s.style.height = size + 'px';

      // –±–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (150‚Äì250)
      const base = 250 + Math.random() * 200; //—Å–∫–æ—Ä–æ—Å—Ç—å 250‚Äì450 px

      // –º–Ω–æ–∂–∏—Ç–µ–ª—å: –∫—Ä—É–ø–Ω–µ–µ –∏—Å–∫—Ä–∞ ‚Üí –º–µ–¥–ª–µ–Ω–Ω–µ–µ –ª–µ—Ç–∏—Ç (0.9..1.3)
      const factor = 0.9 + (size / 16) * 0.4;  // –°–≤—è–∑—å —Ä–∞–∑–º–µ—Ä–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏

      // –∏—Ç–æ–≥–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
      const speed = base * factor;

      // ‚è± –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –∫—Ä—É–ø–Ω–µ–µ –∏—Å–∫—Ä–∞ ‚Äî –¥–æ–ª—å—à–µ –∂–∏–≤—ë—Ç (0.9s..1.8s)
      const dur = 1.5 + (size / 16) * 1.5;  // 1.5‚Äì3s
      s.style.setProperty('--dur', dur + 's');

      // –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
      s.style.setProperty('--dx', Math.cos(angle) * speed + 'px');
      s.style.setProperty('--dy', Math.sin(angle) * speed + 'px');

      // —Ü–≤–µ—Ç
      s.style.setProperty('--h', hues[i % hues.length]);

      wrap.appendChild(s);
      s.addEventListener('animationend', () => s.remove());
    }

    // 3) –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ –æ–≤–µ—Ä–ª–µ—è
    const overlay = document.getElementById('startOverlay');

    // –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
    overlay.classList.add('hidden');

    // –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ (1.2s)
    overlay.addEventListener('transitionend', () => {
      overlay.style.display = 'none';
    }, { once: true });
  });

  });

    let currentWord = null;
    let modalOpen = false;

    const modal = document.createElement('div');
    modal.id = 'modal';
    modal.innerHTML = `
      <div class="modal-content">
        <span class="close">&times;</span>
        <p id="question-text"></p>
        <img id="question-image" src="" alt="" style="max-width: 100%; display: none;"/>
        <input type="text" id="user-answer" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ...">
        <button id="submit-answer">–û–ö</button>
      </div>
    `;
    document.body.appendChild(modal);
    const 
      modalOk = document.getElementById('submit-answer'),
      modalInput = document.getElementById('user-answer');

    const container = document.getElementById('crossword');

    const rows = 19, cols = 11;
    const words = [
      {text: '–°–ù–ï–ì–û–í–ò–ö', q: '‚ú® –°—Ç–æ–∏—Ç –≤–æ –¥–≤–æ—Ä–µ —Å –º–æ—Ä–∫–æ–≤–∫–æ–π –≤–º–µ—Å—Ç–æ –Ω–æ—Å–∞. (8 –±—É–∫–≤)', row: 0, col: 1, img: 'img/snegovik.jpg'},
      {text: '–ö–ê–ö–ê–û', q: '‚ú® –ö–∞–∫–æ–π –≤–æ–ª—à–µ–±–Ω—ã–π —à–æ–∫–æ–ª–∞–¥–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ –ø—å—é—Ç, —á—Ç–æ–±—ã —Å–æ–≥—Ä–µ—Ç—å—Å—è? (5 –±—É–∫–≤)', row: 1, col: 2, img: 'img/kakao.jpg'},
      {text: '–ï–õ–ö–ê', q: '‚ú® –ö–∞–∫ –∑–æ–≤—É—Ç –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–µ –Ω–∞—Ä—è–¥–Ω–æ–µ –¥–µ—Ä–µ–≤–æ? (4 –±—É–∫–≤—ã)', row: 2, col: 5, img: 'img/elka.jpg'},
      {text: '–ú–ï–®–û–ö', q: '‚ú® –í —á—ë–º –î–µ–¥ –ú–æ—Ä–æ–∑ –Ω–æ—Å–∏—Ç —á—É–¥–æ –∏ –ø–æ–¥–∞—Ä–∫–∏? (5 –±—É–∫–≤)', row: 3, col: 4, img: 'img/meshok.jpg'},
      {text: '–°–ù–ï–ì', q: '‚ú® –û–Ω –ø–∞–¥–∞–µ—Ç —Å –Ω–µ–±–∞ –∏ —Ç–∞–µ—Ç –≤ –ª–∞–¥–æ—à–∫–µ. (4 –±—É–∫–≤—ã)', row: 4, col: 4, img: 'img/sneg.jpg'},
      {text: '–ë–´–ß–û–ö', q: '‚ú® –ò–¥–µ—Ç ... –∫–∞—á–∞–µ—Ç—Å—è, –≤–∑–¥—ã—Ö–∞–µ—Ç –Ω–∞ —Ö–æ–¥—É (5 –±—É–∫–≤)', row: 5, col: 6, img: 'img/bai-bai.jpg'},
      {text: '–°–ê–ù–ö–ò', q: '‚ú® –ß—Ç–æ –º—á–∏—Ç—Å—è —Å –≥–æ—Ä–∫–∏ –∏ –¥–µ–ª–∞–µ—Ç –¥–µ—Ç–µ–π —Å—á–∞—Å—Ç–ª–∏–≤—ã–º–∏? (5 –±—É–∫–≤)', row: 6, col: 6, img: 'img/sanki.jpg'},
      {text: '–ö–û–ù–§–ï–¢–´', q: '‚ú® –Ø—Ä–∫–∏–µ –∏ —Å–ª–∞–¥–∫–∏–µ, –ø—Ä—è—á—É—Ç—Å—è –ø–æ–¥ —ë–ª–∫–æ–π. (7 –±—É–∫–≤)', row: 7, col: 1, img: 'img/konfeti.jpg'},
      {text: '–û–õ–ò–í–¨–ï', q: '‚ú® –ö–∞–∫–æ–π —Å–∞–ª–∞—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å—Ç–æ–∏—Ç –Ω–∞ –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–º —Å—Ç–æ–ª–µ? (6 –±—É–∫–≤)', row: 8, col: 3, img: 'img/olive.jpg'},
      {text: '–°–ù–ï–ì–£–†–û–ß–ö–ê', q: '‚ú® –ö—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –î–µ–¥—É –ú–æ—Ä–æ–∑—É –¥–∞—Ä–∏—Ç—å –ø–æ–¥–∞—Ä–∫–∏? (10 –±—É–∫–≤)', row: 9, col: 0, img: 'img/sneguroshka.jpg'},
      {text: '', q: '', row: 10, col: 0},
      {text: '–°–ï–í–ï–†', q: '‚ú® –ì–¥–µ –∂–∏–≤—ë—Ç –î–µ–¥ –ú–æ—Ä–æ–∑? (5 –±—É–∫–≤)', row: 11, col: 4, img: 'img/sever.jpg'},
      {text: '', q: '', row: 12, col: 0},
      {text: '–°–ê–ù–¢–ê', q: '‚ú® –ö—Ç–æ –ª–µ—Ç–∞–µ—Ç –Ω–∞ —Å–∞–Ω—è—Ö —Å –æ–ª–µ–Ω—è–º–∏? (5 –±—É–∫–≤)', row: 13, col: 6, img: 'img/santa.jpg'},
      {text: '–î–ï–¢–ò', q: '‚ú® –ö—Ç–æ –≤–µ—Ä–∏—Ç –≤ —á—É–¥–æ –∏ –ª–µ–ø–∏—Ç —Å–Ω–µ–≥–æ–≤–∏–∫–∞? (4 –±—É–∫–≤—ã)', row: 14, col: 5, img: 'img/deti.jpg'},
      {text: '–ü–û–î–ê–†–û–ö', q: '‚ú® –ß—Ç–æ –±–ª–µ—Å—Ç—è—â–µ–µ —Å—Ç–æ–∏—Ç –ø–æ–¥ —ë–ª–∫–æ–π? (7 –±—É–∫–≤)', row: 15, col: 2, img: 'img/podarok.jpg'},
      {text: '–ó–í–ï–ó–î–ê', q: '‚ú® –ß—Ç–æ —Å–≤–µ—Ä–∫–∞–µ—Ç –Ω–∞ –º–∞–∫—É—à–∫–µ —ë–ª–∫–∏? (6 –±—É–∫–≤)', row: 16, col: 2, img: 'img/zvezda.jpg'},
      {text: '–ó–ê–Ø–¶', q: '‚ú® –ö—Ç–æ —Å–∫–∞—á–µ—Ç –ø–æ —Å–Ω–µ–≥—É —Å –¥–ª–∏–Ω–Ω—ã–º–∏ —É—à–∞–º–∏? (4 –±—É–∫–≤)', row: 17, col: 3, img: 'img/zayaz.jpg'},
      {text: '–í–ï–î–†–û', q: '‚ú® –ß—Ç–æ —Å—Ç–æ–∏—Ç –≤–º–µ—Å—Ç–æ —à–∞–ø–∫–∏ —É —Å–Ω–µ–≥–æ–≤–∏–∫–∞? (5 –±—É–∫–≤)', row: 18, col: 5, img: 'img/vedro.jpg'}
    ];

    const grid = [];
    for (let r = 0; r < rows; r++) {
      grid[r] = [];
      for (let c = 0; c < cols; c++) {
        const cell = document.createElement('div');
        cell.className = 'cell blank';
        cell.dataset.r = r;
        cell.dataset.c = c;
        container.appendChild(cell);
        grid[r][c] = cell;
      }
    }

    words.forEach((w, i) => {
      const wordLength = w.text.length;

      for (let k = 0; k < wordLength; k++) {
        const r = w.row;
        const c = w.col + k;
        const cell = grid[r][c];

        cell.classList.remove('blank');
        cell.classList.add('cell');
        cell.dataset.letter = w.text[k];
        // cell.textContent = w.text[k];
        
        if (k === 0) {
          cell.classList.add('start');
          cell.title = '–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å';
          cell.dataset.index = i;
          cell.addEventListener('click', startInput);

          // ‚¨áÔ∏è –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–º–µ—Ä —Å–ª–æ–≤–∞ –≤ —è—á–µ–π–∫—É
          const number = document.createElement('div');
          number.textContent = (i + 1);
          number.classList.add('number');
          cell.appendChild(number);
        }
      }
    });

    // —Ç—ã–∫–Ω—É–ª–∏ –Ω–∞ —Ü–∏—Ñ—Ä—É
    function startInput(e) {
      e.preventDefault();
      const idx = e.currentTarget.dataset.index;
      currentWord = words[idx];

      document.getElementById('question-text').textContent = currentWord.q || '–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ:';
      modalInput.value = '';
      document.getElementById('submit-answer').dataset.index = idx;

      modal.style.display = 'flex';
      requestAnimationFrame(() => modal.classList.add('show')); // –ø–ª–∞–≤–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å
      document.body.classList.add('modal-open');
      const imagePath = currentWord.img || `img/${currentWord.text.toLowerCase()}.jpg`;
      const img = document.getElementById('question-image');
      img.src = imagePath;
      img.style.display = 'block';

      document.getElementById('modal').style.display = 'flex';
      modalInput.focus();
      modalOpen = true;
    }

    // –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
    modalOk.onclick = checkAnswer;

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    modal.querySelector('.close').onclick = closeModal;
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal();
        return;
      }
      if (e.key === 'Enter' && modalOpen) {
        checkAnswer();

        return;
      }
    });

    function checkAnswer() {
      if (!currentWord) {
        return;
      }

      const userAnswer = modalInput.value.trim().toUpperCase();
      if (userAnswer === currentWord.text) {
        fillWord(currentWord);
        closeModal();
      } else {
        alert('‚òÉÔ∏è –û–≥–æ! –ü–æ—á—Ç–∏ —É–≥–∞–¥–∞–ª, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑–æ–∫');
        modalInput.focus();
      }
    }

    function closeModal() {
      if (!modalOpen) {
        return;
      }
      modal.classList.remove('show');
      setTimeout(() => { modal.style.display = 'none'; }, 200); // –¥–æ–∂–¥–∞—Ç—å—Å—è –∞–Ω–∏–º–∞—Ü–∏–∏ ~200–º—Å
      document.body.classList.remove('modal-open');
      currentWord = null;
      modalOpen = false;
    }

    // –ó–∞–ø–æ–ª–Ω—è–µ—Ç –∫–ª–µ—Ç–∫–∏ –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–≤–µ–ª–∏
    function fillWord(w) {
      for (let k = 0; k < w.text.length; k++) {
        const r = w.row;
        const c = w.col + k;
        const cell = grid[r][c];
        
        cell.textContent = w.text[k];
        cell.classList.add('filled');
      }
    }
  </script>
</body>
</html>
